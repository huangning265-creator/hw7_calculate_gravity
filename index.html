<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gravity Station â€” Web Interface</title>
  <link rel="stylesheet" href="/static/styles.css" />
  <style>
    /* ç°¡å–®æ¨£å¼è®“å ±å‘Šçœ‹èµ·ä¾†æ›´æ¸…æ¥š */
    .report-section { 
      border: 1px solid #ccc; 
      padding: 1em; 
      margin-top: 1em; 
      background: #f9f9f9; 
    }
  </style>
</head>
<body>
  <main class="container">
    <h1>åœ°çƒç‰©ç†é‡åŠ›è¨ˆç®—å·¥ä½œç«™ v2.0</h1>
    <p class="muted">è¼¸å…¥æ¸¬ç«™è³‡æ–™ï¼ŒæŒ‰ä¸‹ã€Œç”¢ç”Ÿå°ˆæ¥­å ±å‘Šã€ã€‚ï¼ˆç´”å‰ç«¯é‹ç®—ï¼‰</p>

    <section class="form-card">
      <form id="gravityForm">
        <div class="row">
          <label>æ¸¬ç«™é¡å‹</label>
          <select name="station_type" id="station_type">
            <option value="Land" selected>Land</option>
            <option value="Marine">Marine</option>
          </select>
        </div>

        <div class="row">
          <label for="g_obs">è§€æ¸¬é‡åŠ› g_obs (mGal)</label>
          <input type="number" step="any" id="g_obs" name="g_obs" value="980717.39" required />
        </div>

        <div class="row">
          <label for="lat">ç·¯åº¦ (degree)</label>
          <input type="number" step="any" id="lat" name="lat" value="48.1195" required />
        </div>

        <div class="row">
          <label for="lon">ç¶“åº¦ (degree)</label>
          <input type="number" step="any" id="lon" name="lon" value="12.1878" required />
        </div>

        <div class="row">
          <label for="h">é«˜ç¨‹ / æ°´æ·± h (m)</label>
          <input type="number" step="any" id="h" name="h" value="487.9" required />
        </div>

        <details class="row" style="margin-top:8px;">
          <summary>é€²éšé¸é … (å¯†åº¦)</summary>
          <label for="rho_rock">åœ°æ®¼å²©çŸ³å¯†åº¦ Ï_rock (g/cmÂ³)</label>
          <input type="range" id="rho_rock" name="rho_rock" min="1.0" max="3.5" step="0.01" value="2.67" />
          <span id="rho_val">2.67</span>
        </details>

        <div class="row">
          <button type="submit" id="submitBtn">ğŸš€ ç”¢ç”Ÿå°ˆæ¥­å ±å‘Š</button>
        </div>
      </form>
    </section>

    <section class="result-card">
      <h2>è¨ˆç®—å ±å‘Š</h2>
      <div id="reportBox" class="report-section">
        çµæœæœƒé¡¯ç¤ºåœ¨é€™è£¡...
      </div>
    </section>
  </main>

  <script>
    const form = document.getElementById('gravityForm');
    const reportBox = document.getElementById('reportBox');
    const rho = document.getElementById('rho_rock');
    const rhoVal = document.getElementById('rho_val');

    // æ›´æ–°æ»‘æ¡¿æ•¸å€¼
    rho.addEventListener('input', (e) => {
      rhoVal.textContent = e.target.value;
    });

    // è¡¨å–®æäº¤äº‹ä»¶
    form.addEventListener('submit', (e) => {
      e.preventDefault(); // ä¸åˆ·æ–°é é¢

      // è®€å–è¡¨å–®è³‡æ–™
      const station_type = document.getElementById('station_type').value;
      const g_obs = parseFloat(document.getElementById('g_obs').value);
      const lat = parseFloat(document.getElementById('lat').value);
      const lon = parseFloat(document.getElementById('lon').value);
      const h = parseFloat(document.getElementById('h').value);
      const rho_rock = parseFloat(document.getElementById('rho_rock').value);

      // é€™è£¡å¯ä»¥æ”¾ä½ æƒ³è¦çš„è¨ˆç®—å…¬å¼
      const g_corrected = g_obs + (rho_rock - 2.67) * 10; // ç¯„ä¾‹è¨ˆç®—

      // ç”Ÿæˆå®Œæ•´å ±å‘Š
      const reportHTML = `
        <h3>è§€æ¸¬å ±å‘Š</h3>
        <p><strong>æ¸¬ç«™é¡å‹:</strong> ${station_type}</p>
        <p><strong>è§€æ¸¬é‡åŠ›:</strong> ${g_obs} mGal</p>
        <p><strong>ç·¯åº¦:</strong> ${lat}Â°</p>
        <p><strong>ç¶“åº¦:</strong> ${lon}Â°</p>
        <p><strong>é«˜ç¨‹/æ°´æ·±:</strong> ${h} m</p>
        <p><strong>åœ°æ®¼å¯†åº¦:</strong> ${rho_rock} g/cmÂ³</p>
        <p><strong>ä¿®æ­£å¾Œé‡åŠ›:</strong> ${g_corrected.toFixed(2)} mGal</p>
      `;

      reportBox.innerHTML = reportHTML;
    });
  </script>
</body>
</html>
