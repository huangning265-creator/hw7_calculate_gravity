<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gravity Station — Web Interface</title>
  <link rel="stylesheet" href="/static/styles.css" />
</head>
<body>
  <main class="container">
    <h1>地球物理重力計算工作站 v2.0</h1>
    <p class="muted">輸入測站資料，按下「產生專業報告」。（後端由 Flask 提供計算）</p>

    <section class="form-card">
      <!-- 🔥 這裡改成標準 POST 表單送到 /calculate -->
      <form id="gravityForm" method="POST" action="/calculate">
        <div class="row">
          <label>測站類型</label>
          <select name="station_type" id="station_type">
            <option value="Land" selected>Land</option>
            <option value="Marine">Marine</option>
          </select>
        </div>

        <div class="row">
          <label for="g_obs">觀測重力 g_obs (mGal)</label>
          <input type="number" step="any" id="g_obs" name="g_obs" value="980717.39" required />
        </div>

        <div class="row">
          <label for="lat">緯度 (degree)</label>
          <input type="number" step="any" id="lat" name="lat" value="48.1195" required />
        </div>

        <div class="row">
          <label for="lon">經度 (degree)</label>
          <input type="number" step="any" id="lon" name="lon" value="12.1878" required />
        </div>

        <div class="row">
          <label for="h">高程 / 水深 h (m)</label>
          <input type="number" step="any" id="h" name="h" value="487.9" required />
        </div>

        <details class="row" style="margin-top:8px;">
          <summary>進階選項 (密度)</summary>
          <label for="rho_rock">地殼岩石密度 ρ_rock (g/cm³)</label>
          <input type="range" id="rho_rock" name="rho_rock" min="1.0" max="3.5" step="0.01" value="2.67" />
          <span id="rho_val">2.67</span>
        </details>

        <div class="row">
          <button type="submit" id="submitBtn">🚀 產生專業報告</button>
        </div>
      </form>
    </section>

    <section class="result-card">
      <h2>計算報告</h2>
      <pre id="reportBox" class="report-box">
提交後，將會跳轉到完整的報告頁。
      </pre>
    </section>
  </main>

  <script>
    // 更新滑桿顯示
    const rho = document.getElementById('rho_rock');
    const rhoVal = document.getElementById('rho_val');

    rho.addEventListener('input', (e) => {
      rhoVal.textContent = e.target.value;
    });

    // ❌ 移除 fetch 行為（因為我們要跳轉頁面）
    // form 不需要 JavaScript submit handler
  </script>
</body>
</html>
